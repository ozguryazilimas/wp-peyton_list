(function($){$.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/(\{.*\})/,single:"metadata"},sanitizeObject:function(a){if(!a||typeof a!="object")return a;var b=Array.isArray(a)?[]:{};for(var c in a){var d=a[c];if(typeof d=="function")continue;b[c]=d&&typeof d=="object"?this.sanitizeObject(d):typeof d=="string"?DOMPurify.sanitize(d):d}return b},setType:function(a,b){this.defaults.type=a;this.defaults.name=b},get:function(elem,opts){var data,m,e,attr,settings=$.extend({},this.defaults,opts);if(!settings.single.length)settings.single="metadata";if(data=$.data(elem,settings.single))return data;data="{}";if(settings.type=="class"){m=settings.cre.exec(elem.className);if(m)data=m[1]}else if(settings.type=="elem"){if(!elem.getElementsByTagName)return undefined;e=elem.getElementsByTagName(settings.name);if(e.length)data=$.trim(e[0].innerHTML)}else if(elem.getAttribute!=undefined){attr=elem.getAttribute(settings.name);if(attr)data=attr}if(data.indexOf("{")<0)data="{"+data+"}";try{data=JSON.parse(data)}catch(err){try{data=data.replace(/([{,]\s*)(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'$1"$3":').replace(/'/g,'"');data=JSON.parse(data)}catch(err2){data={}}}data=this.sanitizeObject(data);$.data(elem,settings.single,data);return data}}}),$.fn.metadata=function(a){return $.metadata.get(this[0],a)}})(jQuery);